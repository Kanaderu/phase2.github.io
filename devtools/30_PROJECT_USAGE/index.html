<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Phase2">
  
  <title>Project Usage - DevTools CLI Documentation</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Project Usage";
    var mkdocs_page_input_path = "30_PROJECT_USAGE.md";
    var mkdocs_page_url = "/30_PROJECT_USAGE/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-305109-83', 'readthedocs.org/projects/devtools');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> DevTools CLI Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../00_INTRO/">Introduction</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../10_TOOLCHAIN/">Tool Chain</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../20_PROJECT_SETUP/">Project Setup</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">Project Usage</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#project-usage">Project Usage</a></li>
                
                    <li><a class="toctree-l4" href="#watches">Watches</a></li>
                
                    <li><a class="toctree-l4" href="#what-is-the-build-container">What is the Build container</a></li>
                
                    <li><a class="toctree-l4" href="#how-and-why-to-use-the-build-container">How and why to use the build container</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../40_INTEGRATION/">Integration</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../50_TROUBLESHOOTING/">Troubleshooting</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../60_FAQ/">FAQ</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../99_LINUX/">LINUX</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">DevTools CLI Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Project Usage</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://bitbucket.org/phase2tech/_devtools_vm" class="icon icon-bitbucket"> Edit on BitBucket</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="project-usage">Project Usage</h2>
<h3 id="watches">Watches</h3>
<p>Often we need <code>watches</code> running inside of our containers. This could be for webpack, grunt, nodemon, etc.  One of the main challenges with the NFS mounts used in DevTools is that they do not forward filesystem notifications across the NFS mount and into containers, so we need to facilitate that.</p>
<p>There is a command <code>devtools watch [options] &lt;path&gt;</code>. Running this on your host will watch for changes and rsync notifications to files and directories under <code>&lt;path&gt;</code> into the Docker Machine VM (which will then provide filesystem notifications into the container). These are the options for <code>devtools watch</code></p>
<ul>
<li><code>--machine &lt;name&gt;</code> Optional: Specify a machine to send events. It will default to our <code>dev</code> machine</li>
<li><code>--ignorefile &lt;file&gt;</code> Optional: Specify a file that contains patterns for directories/files to ignore.  Put one entry per line (blank lines and comments are allowed). If not specified it will look for a file named <code>.devtools-watch-ignore</code> in the working directory and all parent directories.</li>
</ul>
<h3 id="what-is-the-build-container">What is the Build container</h3>
<p>Part of Dev Tools is a <a href="https://hub.docker.com/r/phase2/devtools-build/">devtools-build</a> image.  The idea of the build container is that it will have installed nearly all of the tools you'd need to work on a project and the proper versions so that they work well together.  Everything from drush to gem to npm to composer as well as grunt, bower, yeoman, etc. Providing these tools in a container means that you'll never have to worry about having the right tools installed on your laptop or integration environment to get your job done.</p>
<h3 id="how-and-why-to-use-the-build-container">How and why to use the build container</h3>
<p>The example Drupal project contains a <a href="../../examples/drupal8/build.yml">build.yml</a> Docker Compose file that shows a variety of ways to use the container that we will highlight below.</p>
<h4 id="getting-a-shell-for-buildtooling-operations">Getting a shell for build/tooling operations</h4>
<p>Getting a shell into a build container to execute any operations is the simplest approach. You simply want to get access to the <code>cli</code> container we defined in the compose file.  The command <code>docker-compose -f build.yml run cli</code> will start an instance of the <code>phase2/devtools-build</code> image and run a bash shell for you.  From there you are free to use <code>drush</code>, <code>grunt</code> or whatever your little heart desires.</p>
<h4 id="running-commands-but-not-from-a-dedicated-shell">Running commands, but not from a dedicated shell</h4>
<p>Another concept in the Docker world is starting a container to run a single command and allowing the container stop when the command is completed.  This is great if you run commands infrequently, or don't want to have another container constantly running.  Running your commands on containers in this fashion is also well suited for commands that don't generate any files on the filesystem or if they do, they write those files on to volumes mounted into the container.</p>
<p>The <code>drush</code> container defined in the example <code>build.yml</code> file is a container designed specifically to run drush in a single working directory taking only the commands as arguments.  This approach allows us to provide a quick and easy mechanism for running any drush command, such as <code>sqlc</code>, <code>cache-rebuild</code>, and others, in your Drupal site quick and easily.</p>
<p>There are also other examples of a <code>grunt</code> command container similar to <code>drush</code> and an even more specific command container around running a single command, <code>drush make</code> to build the site from a make/dependency file.</p>
<h4 id="forwardimport-your-ssh-key-into-the-build-container-to-clone-private-repos">Forward/Import your SSH Key into the build container to clone private repos</h4>
<p>Certain containers like jenkins and devtools-build may need your private key. This is supported by importing your private key into the container via a volume mount.  </p>
<p>To get your private key into the build container, volume mount your key into the container at <code>/root/.ssh/devtools.key</code> and it will be processed accordingly.</p>
<p><code>~/.ssh/id_rsa:/root/.ssh/devtools.key</code></p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../40_INTEGRATION/" class="btn btn-neutral float-right" title="Integration">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../20_PROJECT_SETUP/" class="btn btn-neutral" title="Project Setup"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://bitbucket.org/phase2tech/_devtools_vm" class="icon icon-bitbucket" style="float: left; color: #fcfcfc"> BitBucket</a>
      
      
        <span><a href="../20_PROJECT_SETUP/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../40_INTEGRATION/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
