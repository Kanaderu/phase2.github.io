<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Phase2">
  
  <title>Project Operations - Grunt-Drupal-Tasks</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Project Operations";
    var mkdocs_page_input_path = "40_OPERATIONS.md";
    var mkdocs_page_url = "/40_OPERATIONS/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Grunt-Drupal-Tasks</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../05_SETUP/">Project Setup</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../10_BUILD/">Build Process</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../20_QUALITY/">Code Quality</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../30_FRONTEND/">Frontend Ties</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">Project Operations</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#project-operations">Project Operations</a></li>
                
                    <li><a class="toctree-l4" href="#invoking-ad-hoc-operations">Invoking Ad Hoc Operations</a></li>
                
                    <li><a class="toctree-l4" href="#install-settings">Install settings</a></li>
                
                    <li><a class="toctree-l4" href="#serve-settings">Serve Settings</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../40_TESTING/">Testing</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../60_PACKAGE/">Deploy Packaging</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../70_GIT_INTEGRATION/">Git Integration</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../70_ADVANCED_CONFIG/">Advanced Options</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../80_CI/">Continuous Integration</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../80_CUSTOM_TASKS/">Extending GDT</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../90_FAQ/">FAQ</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Grunt-Drupal-Tasks</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Project Operations</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/phase2/grunt-drupal-tasks/" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="project-operations">Project Operations</h1>
<blockquote>
<p>Operations other than testing involved in the creation, hosting, and management of a running Drupal site.</p>
</blockquote>
<h2 id="invoking-ad-hoc-operations">Invoking Ad Hoc Operations</h2>
<p>Some of the most common use cases for any Drupal site are the basic operations
of installation, running database updates, and clearing the cache. These are not
difficult operations, but many developers appreciate the common shorthand a
little grunt magic can provide.</p>
<p>To keep this flexible the new Operations system offers nothing out of the box,
but facilitates creating lightweight commands or callouts to the shell for more
advanced scripts you want easily run on the project by the entire team.</p>
<p>This should remind you of the <a href="">Frontend &amp; Theming Operations</a>.</p>
<pre><code>{
  &quot;scripts&quot;: {
    &quot;update&quot;: &quot;drush &lt;%= config.alias %&gt; updatedb -yv &amp;&amp; drush &lt;%= config.alias %&gt; features-revert-all -yv&quot;,
    &quot;reset&quot;: &quot;drush &lt;%= config.alias %&gt; registry-rebuild &amp;&amp; drush &lt;%= config.alias %&gt; cc all&quot;
  }
}
</code></pre>

<p>Here you see two commands defined inside the top-level <code>scripts</code> configuration.</p>
<ul>
<li><code>grunt update</code> demonstrates running database updates and reverting all
<a href="http://www.drupal.org/project/features">Features</a>.</li>
<li><code>grunt reset</code> demonstrates a thorough reset of the file registry and Drupal
caches.</li>
</ul>
<p>The Alias and Profile is specified per the rules for <strong>Magic Configuration</strong>.</p>
<p><strong>alias</strong>: The Drush Site Alias. This is computed as a helper for use in
project operations, but is not yet applied as part of other tasks. Defaults to
<code>@&lt;domain&gt;</code>. The environment variable to override is <code>GDT_SITE_ALIAS</code>.</p>
<h3 id="pre-and-post-operations">Pre and Post Operations</h3>
<p>Similar to <code>npm run</code>, the operations defined in your Gruntconfig will support
<code>pre-</code> and <code>post-</code> variants. If the main script exists the pre-script will be
triggered first and the post-script will be triggered after. This allows you to
easily extend any project operation with separate grunt, bash, or other tasks.</p>
<p>For example, if you define a new script <code>update</code>, you may also configure
<code>pre-update</code> and <code>post-update</code>.</p>
<h2 id="install-settings">Install settings</h2>
<p>The <code>install</code> task will either install Drupal via the configured <code>profile</code>, or
if a path to a database is configured, load this database:</p>
<p>To specify a profile other than the <code>standard</code> profile:</p>
<pre><code class="json">{
  &quot;project&quot;: {
    &quot;profile&quot;: &quot;openatrium&quot;
  }
}
</code></pre>

<p>to specify a database to load:</p>
<pre><code class="json">{
  &quot;project&quot;: {
    &quot;db&quot;: &quot;path/to/project.sql.gz&quot;
  }
}
</code></pre>

<p><strong>project.profile</strong> The Drupal installation profile, this will be used to
configure the behavior of the <code>grunt install</code> and <code>grunt serve</code> tasks. Defaults
to <code>standard</code>. The environment variable is <code>GDT_INSTALL_PROFILE</code></p>
<p><strong>project.db</strong> If specified, this database will be loaded instead of running a
site installation. If the file referenced is not present <code>grunt install</code> will
fall back to a standard <code>drush site-install</code>.</p>
<h3 id="pre-and-post-installation">Pre and Post Installation</h3>
<p>The install task has a unique implementation of support for the pre and post
scripts otherwise made available for themes and project operations. This allows
you to implement simple directives or scripts to prepare for installation or
perform non-standardized operations after the main installation routine.</p>
<h2 id="serve-settings">Serve Settings</h2>
<p>The Serve task allows you to run Drupal using PHP&rsquo;s built-in webserver. This
facilitates quick demos and low-overhead development for projects with simple
infrastructure requirements. When using this task it will take over the
terminal window.</p>
<p><code>grunt serve</code> will not install the Drupal site. Run with <code>grunt serve:demo</code> to
skip starting up watch tasks.</p>
<pre><code class="json">{
  &quot;project&quot;: {
    &quot;profile&quot;: 'project_profile_name'
  },
  &quot;serve&quot;: {
    &quot;port&quot;: 9043,
    &quot;concurrent&quot;: [
      &quot;watch-theme&quot;
    ]
  }
}
</code></pre>

<p><strong>serve.profile</strong>: DEPRECATED - use <strong>project.profile</strong> instead.</p>
<p><strong>serve.port</strong>: The port number to bind for the webserver. Only one service may
occupy a port on a machine, so a project-specific port may be worthwhile.
Defaults to <code>8080</code>.</p>
<p><strong>serve.concurrent</strong>: An array of grunt tasks to be run concurrently to the
server. When run with <code>serve:demo</code> or <code>serve:test</code> these tasks are not used. By
default they include &lsquo;watch-test&rsquo; and &lsquo;watch-theme&rsquo;. If you use this
configuration to add tasks be sure to include these as they will be suppressed
by any configuration.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../40_TESTING/" class="btn btn-neutral float-right" title="Testing">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../30_FRONTEND/" class="btn btn-neutral" title="Frontend Ties"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/phase2/grunt-drupal-tasks/" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../30_FRONTEND/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../40_TESTING/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
